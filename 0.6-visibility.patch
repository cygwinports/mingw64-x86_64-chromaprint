--- origsrc/chromaprint-0.6/CMakeLists.txt	2011-12-22 05:11:23.000000000 -0600
+++ src/chromaprint-0.6/CMakeLists.txt	2012-05-18 18:46:41.299678600 -0500
@@ -54,7 +54,7 @@ if(CMAKE_COMPILER_IS_GNUCXX)
 	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall")
 	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall")
 endif()
-if(CMAKE_COMPILER_IS_GNUCXX AND BUILD_SHARED_LIBS)
+if(CMAKE_COMPILER_IS_GNUCXX AND BUILD_SHARED_LIBS AND NOT CYGWIN AND NOT WIN32)
 	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fvisibility=hidden -fvisibility-inlines-hidden")
 	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fvisibility=hidden")
 endif()
